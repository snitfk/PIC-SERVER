{% extends "base.html" %}
{% load staticfiles %}

{% block title %}工资变动信息管理列表{% endblock %}
{% block headcss %}
	<link rel="stylesheet" href="{% static 'framework/inspinia/css/font-awesome.css' %}">
{% endblock %}

{% block content %}
	<div class="row wrapper border-bottom white-bg page-heading" style="margin-bottom:20px;">
		<div class="col-lg-12">
			<h2>工资变动名单</h2>
			<ol class="breadcrumb">
				<li><a href="/">首页</a></li>
				<li><a href="#">工资变动管理</a></li>
			</ol>
			<div class="clear"></div>
		</div>

		<div class="col-lg-12">
			<div class="hr-line-dashed"></div>
		</div>

		<form method="get" action="{% url 'amend_amend_list' %}" onsubmit="return clean_get_param(this);">
			<div class="col-lg-2">
				<div class="input-group m-b">
					<span class="input-group-addon">变动人名称</span>
					<input class="form-control" id="staff" name='staff'
					       {% if request.GET.staff %}value="{{ request.GET.staff }}" {% endif %} type="text">
				</div>
			</div>


			<div class="col-lg-2">
				<div class="input-group m-b">
					<span class="input-group-addon">变动月份</span>
					<input type="text" class="form-control" id="month" name="month"
					       {% if request.GET.month %}value="{{ request.GET.month }}" {% endif %}/>
				</div>
			</div>

			<div class="col-lg-2">
				<div class="input-group m-b">
					<span class="input-group-addon">变动类别</span>
					<select class="form-control" name="amend_type">
						<option value="">请选择</option>
						{% for plus in amend_plus_list %}
							<option {% if plus.id == form.amend_type.id.value %}selected="selected"{% endif %}
							        value="{{ plus.id }}">{{ plus.name }}</option>
						{% endfor %}

						{% for plus in amend_sub_list %}
							<option {% if plus.id == form.amend_type.id.value %}selected="selected"{% endif %}
							        value="{{ plus.id }}">{{ plus.name }}</option>
						{% endfor %}
					</select>
				</div>
			</div>

			<div class="col-lg-2">
				<div class="input-group m-b">
					<span class="input-group-addon">变动金额</span>
					<input class="form-control" id="money" name='money'
					       {% if request.GET.money %}value="{{ request.GET.money }}" {% endif %} type="text">
				</div>
			</div>


			<div class="col-lg-2">
				<div class="input-group m-b">
				</div>
			</div>


			<div class="col-lg-2">
				<div class="input-group m-b">
					<button class="btn btn-primary" type="submit"><i class="fa fa-search"></i> Search</button>
				</div>
			</div>
		</form>

	</div>

	<!--两栏式--->
	<div class="row">
		<div class="col-lg-12">
			<div class="ibox float-e-margins">
				<div class="ibox-title"><h5>工资变动列表</h5>
					<a href="{% url 'amend_new_amend' 'AMEND_PLUS_TYPE' %}"
					   class="btn btn-xs btn-info pull-right"><i
							class="fa fa-plus"></i> 加项变动</a>
					<a style="margin-right: 10px" href="{% url 'amend_new_amend' 'AMEND_SUB_TYPE' %}"
					   class="btn btn-xs btn-info pull-right"><i
							class="fa fa-plus"></i> 减项变动</a>
				</div>

				<div class="ibox-content">
					<div class="form-inline">
						<table class="table table-striped table-bordered table-hover">
							<thead>
							<tr>
								<th>序号</th>
								<th>变动人</th>
								<th>变动类别</th>
								<th>变动金额</th>
								<th>变动月份</th>
								<th>备注</th>
								<th>创建人</th>
								<th>创建时间</th>
								<th>操作</th>
							</tr>
							</thead>

							<tbody>
							{% load pagination_tags %}
							{% autopaginate amend_list 10 %}
							{% for amend in amend_list %}
								<tr>
									<td>{{ forloop.counter }}</td>
									<td>{{ amend.staff.name }}</td>
									<td>{{ amend.amend_type.name }}</td>
									<td>{{ amend.money }}</td>
									<td>{{ amend.month }}</td>
									<td>{{ amend.remark }}</td>
									<td>{{ amend.create_user.name }}</td>
									<td>{{ amend.create_time|date:"Y-m-d G:i" }}</td>
									<td><a href="{% url 'amend_edit_amend' amend.amend_type.group_name amend.id %}"
									       class="btn btn-xs btn-info"><i
											class="fa fa-pencil-square"></i> 修改</a>
										<a href="{% url 'amend_delete_amend' amend.id %}" class="btn btn-xs btn-info"><i
												class="fa fa-pencil-square"></i> 删除</a></td>
								</tr>
							{% endfor %}
							</tbody>
						</table>
						{% paginate %}
					</div>
				</div>
			</div>
		</div>
	</div>
	<!--两栏式end--->
{% endblock %}
{% block headjs %}
	<script src="{% static 'plugin/bootstrap-plugin/jqBootstrapValidation.js' %}"></script>

{% endblock %}


{% block footjs %}
	<script type="text/javascript">

		function clean_get_param(the_form) {
			$(':input[value=""]').attr('name', '');
			return true;
		}

	</script>

{% endblock %}

